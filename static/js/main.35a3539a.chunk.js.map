{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Searchbar/Searchbar.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","components/Button/Button.js","components/Loader/Loader.js","services/pixabay-api.js","components/App/App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","SearchBar","state","searchQuery","handleChange","event","currentTarget","name","value","setState","handleSubmit","preventDefault","props","onSubmit","this","className","s","Searchbar","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","modalContent","id","onItemClick","console","log","webformatURL","src","alt","ImageGalleryItemImage","onClick","ImageGallery","handleOpenModal","e","target","images","map","image","Modal","handleKeyDown","code","onBackdrop","handleBackdropClick","window","addEventListener","removeEventListener","content","Overlay","Button","onPress","Spinner","color","height","width","fetchImages","page","fetchUrl","fetch","then","res","json","App","visibleImages","isLoading","openModal","toggleModal","toggleLoading","hadleChangeQuery","query","handleNextPage","handleScroll","scrollTo","top","document","documentElement","scrollHeight","behavior","modalContentSet","itemId","element","find","largeImageURL","getData","hits","catch","error","message","finally","prevProps","isNotLastPage","length","btnEnable","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.35a3539a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3bbCG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__CEgmg\",\"Modal\":\"Modal_Modal__3S9Cc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2ukd7\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2Mzzb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2iRUA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Spinner\":\"Loader_Spinner__3Iq7C\"};","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport s from \"./Searchbar.module.css\";\n\nclass SearchBar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    searchQuery: \"\",\n  };\n\n  handleChange = (event) => {\n    const { name, value } = event.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    const { searchQuery } = this.state;\n\n    this.props.onSubmit(searchQuery);\n    this.setState({ searchQuery: \"\" });\n  };\n\n  render() {\n    const { searchQuery } = this.state;\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            name=\"searchQuery\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleChange}\n            value={searchQuery}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default SearchBar;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport s from \"./ImageGalleryItem.module.css\";\n\nclass ImageGalleryItem extends Component {\n  static propTypes = {\n    onItemClick: PropTypes.func.isRequired,\n    id: PropTypes.number.isRequired,\n    webformatURL: PropTypes.string.isRequired,\n  };\n\n  modalContent = (id) => {\n    this.props.onItemClick(id);\n    console.log(id);\n  };\n  render() {\n    const { id, webformatURL } = this.props;\n    return (\n      <img\n        src={webformatURL}\n        alt=\"\"\n        className={s.ImageGalleryItemImage}\n        onClick={() => this.modalContent(id)}\n      />\n    );\n  }\n}\n\nexport default ImageGalleryItem;\n","import PropTypes from \"prop-types\";\nimport ImageGalleryItem from \"./ImageGalleryItem/ImageGalleryItem\";\nimport React, { Component } from \"react\";\nimport s from \"./ImageGallery.module.css\";\n\nclass ImageGallery extends Component {\n  static propTypes = {\n    onClick: PropTypes.func.isRequired,\n    onItemClick: PropTypes.func.isRequired,\n    images: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.number.isRequired,\n      })\n    ).isRequired,\n  };\n\n  handleOpenModal = (e) => {\n    if (e.target !== e.currentTarget) {\n      this.props.onClick();\n    }\n  };\n\n  render() {\n    const { images, onItemClick } = this.props;\n    return (\n      <ul className={s.ImageGallery} onClick={this.handleOpenModal}>\n        {images &&\n          images.map((image) => (\n            <li key={image.id} className={s.ImageGalleryItem}>\n              <ImageGalleryItem {...image} onItemClick={onItemClick} />\n            </li>\n          ))}\n      </ul>\n    );\n  }\n}\n\nexport default ImageGallery;\n","import React, { Component } from \"react\";\n\nimport PropTypes from \"prop-types\";\n\nimport s from \"./Modal.module.css\";\n\nclass Modal extends Component {\n  static propTypes = {\n    onBackdrop: PropTypes.func.isRequired,\n    content: PropTypes.string.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.onBackdrop();\n    }\n  };\n\n  handleBackdropClick = (e) => {\n    if (e.target === e.currentTarget) {\n      this.props.onBackdrop();\n    }\n  };\n\n  render() {\n    const { content } = this.props;\n    console.log(content);\n    return (\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>\n          <img src={content} alt=\"\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport s from \"./Button.module.css\";\n\nconst Button = ({ onPress }) => {\n  return (\n    <button type=\"button\" onClick={onPress} className={s.Button}>\n      Load more\n    </button>\n  );\n};\nButton.propTypes = {\n  onPress: PropTypes.func.isRequired,\n};\nexport default Button;\n\n// static defaultProps = {\n//   name: \"Load more\",\n// };\n// static propTypes = {\n// name: PropTypes.string,\n// onPress: PropTypes.func.isRequired,\n// };\n\n// const { onPress } = this.props;\n","import React from \"react\";\nimport Loader from \"react-loader-spinner\";\n\nimport s from \"./Loader.module.css\";\n\nconst Spinner = () => {\n  return (\n    <div className={s.Spinner}>\n      <Loader type=\"Puff\" color=\"#00BFFF\" height={200} width={200} />\n    </div>\n  );\n};\n\nexport default Spinner;\n","const API_KEY = \"21886555-3fceaf8550bdc90a73320eabf\";\nconst BASE_URL = \"https://pixabay.com/api/?\";\n\nconst fetchImages = (searchQuery, page) => {\n  const fetchUrl = `${BASE_URL}q=${searchQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n  return fetch(fetchUrl).then((res) => res.json());\n};\n\nexport default fetchImages;\n","import React, { Component } from \"react\";\n\nimport SearchBar from \"../Searchbar/Searchbar\";\nimport ImageGallery from \"../ImageGallery/ImageGallery\";\nimport Modal from \"../Modal/Modal\";\nimport Button from \"../Button/Button\";\nimport Spinner from \"../Loader/Loader\";\n\nimport fetchImages from \"../../services/pixabay-api\";\n\nimport \"./App.css\";\n\nclass App extends Component {\n  state = {\n    modalContent: \"\",\n    searchQuery: \"\",\n    page: 1,\n    visibleImages: [],\n    isLoading: false,\n    openModal: false,\n  };\n\n  componentDidUpdate(prevProps, { searchQuery, page }) {\n    if (searchQuery !== this.state.searchQuery || page !== this.state.page) {\n      this.getData();\n    }\n    this.handleScroll();\n\n    // if (page !== this.state.page) {\n    //   this.getData();\n    // }\n  }\n\n  toggleModal = () => {\n    this.setState(({ openModal }) => ({ openModal: !openModal }));\n  };\n\n  toggleLoading = () => {\n    this.setState(({ isLoading }) => ({ isLoading: !isLoading }));\n  };\n\n  hadleChangeQuery = (query) => {\n    this.setState({\n      searchQuery: query,\n      page: 1,\n      visibleImages: [],\n    });\n  };\n\n  handleNextPage = () => {\n    this.setState(({ page }) => {\n      return {\n        page: page + 1,\n      };\n    });\n  };\n\n  handleScroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  modalContentSet = (itemId) => {\n    const { visibleImages } = this.state;\n    const element = visibleImages.find(({ id }) => id === itemId);\n    this.setState({ modalContent: element.largeImageURL });\n  };\n\n  getData = () => {\n    const { searchQuery, page } = this.state;\n    this.toggleLoading();\n    fetchImages(searchQuery, page)\n      .then(({ hits }) => {\n        this.setState(({ visibleImages }) => {\n          return { visibleImages: [...visibleImages, ...hits] };\n        });\n      })\n      // .then(this.handleScroll)\n      .catch((error) => console.log(error.message))\n      .finally(this.toggleLoading);\n  };\n\n  render() {\n    const { visibleImages, openModal, modalContent, isLoading, page } =\n      this.state;\n    const isNotLastPage = visibleImages.length / page === 12;\n    const btnEnable = visibleImages.length > 0 && !isLoading && isNotLastPage;\n    return (\n      <div className=\"App\">\n        <SearchBar onSubmit={this.hadleChangeQuery} />\n        {visibleImages.length === 0 ? (\n          <h2>Enter your request</h2>\n        ) : (\n          <>\n            <ImageGallery\n              images={visibleImages}\n              onClick={this.toggleModal}\n              onItemClick={this.modalContentSet}\n            />\n\n            {openModal && (\n              <Modal content={modalContent} onBackdrop={this.toggleModal} />\n            )}\n            {isLoading && <Spinner />}\n\n            {btnEnable && (\n              <Button name=\"Load more\" onPress={this.handleNextPage} />\n            )}\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__uJMOz\",\"SearchForm\":\"Searchbar_SearchForm__2jhvQ\",\"SearchFormButton\":\"Searchbar_SearchFormButton__A45pB\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1GILh\",\"SearchFormInput\":\"Searchbar_SearchFormInput__3pEB6\"};"],"sourceRoot":""}